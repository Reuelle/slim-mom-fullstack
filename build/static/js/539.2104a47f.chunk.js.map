{"version":3,"file":"static/js/539.2104a47f.chunk.js","mappings":"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","sources":["webpack://slim-mom-project/./src/components/LoginForm/LoginForm.module.css?4ac5","components/LoginForm/LoginForm.jsx","webpack://slim-mom-project/./src/pages/LoginPage/LoginPage.module.css?f8e0","pages/LoginPage/LoginPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"formTitle\":\"LoginForm_formTitle__B+G+l\",\"inputBox\":\"LoginForm_inputBox__rMJ5f\",\"buttonContainer\":\"LoginForm_buttonContainer__s6Gsn\",\"button\":\"LoginForm_button__SMcn1\",\"active\":\"LoginForm_active__JkB3n\"};","import React, { useState } from 'react';\r\nimport css from './LoginForm.module.css';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport { RotatingLines } from 'react-loader-spinner';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\naxios.defaults.baseURL = 'https://slim-mom-project.onrender.com';\r\n\r\nexport const LoginForm = ({ onLogin }) => {\r\n  // State to manage form inputs\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const isLoginPage = location.pathname === '/login';\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post('/api/users/login', {\r\n        email,\r\n        password,\r\n      });\r\n\r\n      // Extract the token from the response\r\n      console.log(response.data);\r\n\r\n      // const { token } = response.data;\r\n      const { token, name, dailyConsumedProducts } = response.data;\r\n\r\n      if (token) {\r\n        // console.log('Token received:', token);\r\n        localStorage.setItem('token', token);\r\n\r\n        localStorage.setItem('userName', name); // Store user name\r\n        localStorage.setItem(\r\n          'dailyConsumedProducts',\r\n          JSON.stringify(dailyConsumedProducts)\r\n        ); // Store other user data as needed\r\n\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n\r\n        toast.success('Login successful!');\r\n        onLogin();\r\n        navigate('/calculator'); //Redirect to the calculator page\r\n      } else {\r\n        toast.error('Login failed. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      if (error.response && error.response.data.message) {\r\n        toast.error(error.response.data.message);\r\n      } else {\r\n        toast.error(\r\n          'Login failed. Please check your credentials and try again.'\r\n        );\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className={css.formTitle}>\r\n        <h4>LOG IN</h4>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className={css.inputBox}>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              id=\"email\"\r\n              placeholder=\" \"\r\n              value={email}\r\n              onChange={e => setEmail(e.target.value)}\r\n              required\r\n            />\r\n            <label htmlFor=\"email\">Email*</label>\r\n          </div>\r\n          <div className={css.inputBox}>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              id=\"password\"\r\n              placeholder=\" \"\r\n              value={password}\r\n              onChange={e => setPassword(e.target.value)}\r\n              required\r\n            />\r\n            <label htmlFor=\"password\">Password*</label>\r\n          </div>\r\n\r\n          <div className={css.buttonContainer}>\r\n            <button\r\n              className={`${css.button} ${isLoginPage ? css.active : ''}`}\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? (\r\n                <RotatingLines\r\n                  visible={true}\r\n                  height=\"24\"\r\n                  width=\"24\"\r\n                  color=\"white\"\r\n                  strokeWidth=\"5\"\r\n                  animationDuration=\"0.75\"\r\n                  ariaLabel=\"rotating-lines-loading\"\r\n                />\r\n              ) : (\r\n                'Log in'\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              className={css.button}\r\n              type=\"button\"\r\n              onClick={() => navigate('/register')}\r\n            >\r\n              Register\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        <ToastContainer position=\"top-right\" autoClose={3000} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"backgroundContainer\":\"LoginPage_backgroundContainer__wYg6L\"};","import React from 'react';\r\nimport { LoginForm } from '../../components/LoginForm/LoginForm';\r\nimport css from './LoginPage.module.css';\r\n\r\nconst LoginPage = ({ onLogin }) => {\r\n  return (\r\n    <div className={css.backgroundContainer}>\r\n      <LoginForm onLogin={onLogin} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"names":["axios","LoginForm","_ref","onLogin","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","isLoading","setIsLoading","navigate","useNavigate","isLoginPage","useLocation","pathname","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","_callee","e","response","_response$data","token","name","dailyConsumedProducts","_context","prev","next","preventDefault","sent","console","log","data","localStorage","setItem","JSON","stringify","concat","toast","t0","message","finish","stop","_x","apply","arguments","_jsx","children","_jsxs","className","css","onSubmit","type","id","placeholder","value","onChange","target","required","htmlFor","disabled","RotatingLines","visible","height","width","color","strokeWidth","animationDuration","ariaLabel","onClick","ToastContainer","position","autoClose"],"sourceRoot":""}